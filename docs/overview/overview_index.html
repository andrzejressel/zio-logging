<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Summary · ZIO logging</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="ZIO Logging is a functional, type-safe library for logging."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Summary · ZIO logging"/><meta property="og:type" content="website"/><meta property="og:url" content="https://zio.github.io/zio-logging/"/><meta property="og:description" content="ZIO Logging is a functional, type-safe library for logging."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/zio-logging/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100,"cornerOffset":100}
          )
        });
        </script><script src="/zio-logging/js/scrollSpy.js"></script><link rel="stylesheet" href="/zio-logging/css/main.css"/><script src="/zio-logging/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zio-logging/"><img class="logo" src="/zio-logging/img/navbar_brand2x.png" alt="ZIO logging"/><h2 class="headerTitleWithLogo">ZIO logging</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/zio-logging/docs/overview/overview_index" target="_self">Overview</a></li><li class=""><a href="/zio-logging/api" target="_self">API</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Overview</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/zio-logging/docs/overview/overview_index">Summary</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Summary</h1></header><article><div><span><p>ZIO Logging is a functional, type-safe library for logging.</p>
<h2><a class="anchor" aria-hidden="true" id="installation"></a><a href="#installation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<p><code>ZIO-Logging</code> is available via maven repo so importing in <code>build.sbt</code> is sufficient:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"dev.zio"</span> %% <span class="hljs-string">"zio-logging"</span> % version
</code></pre>
<p>If you need <code>slf4j</code> integration use <code>zio-logging-slf4j</code> instead:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"dev.zio"</span> %% <span class="hljs-string">"zio-logging-slf4j"</span> % version
</code></pre>
<p>If you need  <code>scala.js console</code> integration use <code>zio-logging-jsconsole</code> instead:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"dev.zio"</span> %%% <span class="hljs-string">"zio-logging-jsconsole"</span> % version
</code></pre>
<p>If you need  <code>scala.js http</code> log publishing integration use <code>zio-logging-jshttp</code> instead:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"dev.zio"</span> %%% <span class="hljs-string">"zio-logging-jshttp"</span> % version
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="logger-context"></a><a href="#logger-context" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Logger Context</h3>
<p>Logger Context is a mechanism that we use to carry information like logger name or correlation id across different fibers. The implementation uses <code>FiberRef</code> from <code>ZIO</code>.</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.logging._
log.locally(<span class="hljs-type">LogAnnotation</span>.<span class="hljs-type">Name</span>(<span class="hljs-string">"my-logger"</span> :: <span class="hljs-type">Nil</span>)) {
  log.info(<span class="hljs-string">"log entry"</span>) <span class="hljs-comment">// value of LogAnnotation.Name is only visible in this block</span>
}
</code></pre>
<p>The user of the library is allowed to add a custom <code>LogAnnotation</code>:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> customLogAnnotation = <span class="hljs-type">LogAnnotation</span>(<span class="hljs-string">"custom_annotation"</span>, <span class="hljs-number">1</span>, _ + _, _.toString)
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h2>
<h3><a class="anchor" aria-hidden="true" id="simple-console-log"></a><a href="#simple-console-log" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simple console log</h3>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.logging._

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Simple</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> env =
    <span class="hljs-type">Logging</span>.console(
      logLevel = <span class="hljs-type">LogLevel</span>.<span class="hljs-type">Info</span>,
      format = <span class="hljs-type">LogFormat</span>.<span class="hljs-type">ColoredLogFormat</span>()
    ) &gt;&gt;&gt; <span class="hljs-type">Logging</span>.withRootLoggerName(<span class="hljs-string">"my-component"</span>)

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]) =
    log.info(<span class="hljs-string">"Hello from ZIO logger"</span>).provideCustomLayer(env).as(<span class="hljs-type">ExitCode</span>.success)
}

</code></pre>
<p>Expected console output:</p>
<pre><code class="hljs"><span class="hljs-number">2020</span><span class="hljs-number">-02</span><span class="hljs-number">-02</span>T18:<span class="hljs-number">09</span>:<span class="hljs-number">45.197</span><span class="hljs-number">-05</span>:<span class="hljs-number">00</span> INFO <span class="hljs-keyword">default</span>-logger Hello <span class="hljs-keyword">from</span> ZIO logger
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="logger-name-and-log-level"></a><a href="#logger-name-and-log-level" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Logger Name and Log Level</h3>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.logging._

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">LogLevelAndLoggerName</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> env =
    <span class="hljs-type">Logging</span>.consoleErr()

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]) =
    log.locally(<span class="hljs-type">LogAnnotation</span>.<span class="hljs-type">Name</span>(<span class="hljs-string">"logger-name-here"</span> :: <span class="hljs-type">Nil</span>)) {
      log.debug(<span class="hljs-string">"Hello from ZIO logger"</span>)
    }.provideCustomLayer(env).as(<span class="hljs-type">ExitCode</span>.success)
}
</code></pre>
<p>Expected console output:</p>
<pre><code class="hljs"><span class="hljs-number">2020</span><span class="hljs-number">-02</span><span class="hljs-number">-02</span>T18:<span class="hljs-number">22</span>:<span class="hljs-number">33.200</span><span class="hljs-number">-05</span>:<span class="hljs-number">00</span> DEBUG logger-name-here Hello <span class="hljs-keyword">from</span> ZIO logger
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="slf4j-and-correlation-id"></a><a href="#slf4j-and-correlation-id" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Slf4j and correlation id</h3>
<p>We can create an <code>slf4j</code> logger and define how the annotations translate into the logging message:</p>
<pre><code class="hljs css language-scala">
<span class="hljs-keyword">import</span> zio.logging._
<span class="hljs-keyword">import</span> zio.logging.slf4j._


<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Slf4jAndCorrelationId</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{
  <span class="hljs-keyword">val</span> logFormat = <span class="hljs-string">"[correlation-id = %s] %s"</span>

  <span class="hljs-keyword">val</span> env =
    <span class="hljs-type">Slf4jLogger</span>.make{(context, message) =&gt; 
        <span class="hljs-keyword">val</span> correlationId = <span class="hljs-type">LogAnnotation</span>.<span class="hljs-type">CorrelationId</span>.render(
          context.get(<span class="hljs-type">LogAnnotation</span>.<span class="hljs-type">CorrelationId</span>)
        )
        logFormat.format(correlationId, message)
    }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generateCorrelationId</span> </span>=
    <span class="hljs-type">Some</span>(java.util.<span class="hljs-type">UUID</span>.randomUUID())

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]) =
      (<span class="hljs-keyword">for</span> {
        fiber &lt;- log.locally(correlationId(<span class="hljs-string">"1234"</span>))(<span class="hljs-type">ZIO</span>.unit).fork
        _     &lt;- log.info(<span class="hljs-string">"info message without correlation id"</span>)
        _     &lt;- fiber.join
        _ &lt;- log.locally(correlationId(<span class="hljs-string">"1234111"</span>)) {
              log.info(<span class="hljs-string">"info message with correlation id"</span>) *&gt;
                log.throwable(<span class="hljs-string">"another info message with correlation id"</span>, <span class="hljs-keyword">new</span> <span class="hljs-type">RuntimeException</span>(<span class="hljs-string">"error message"</span>)).fork
            }
      } <span class="hljs-keyword">yield</span> <span class="hljs-type">ExitCode</span>.success).provideLayer(env)
}

</code></pre>
<p>Expected Console Output:</p>
<pre><code class="hljs"><span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">56.448</span> <span class="hljs-literal">[<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1920387277</span>]</span> INFO  zio.logging.Examples$ <span class="hljs-literal">[<span class="hljs-identifier">correlation</span>-<span class="hljs-identifier">id</span> = <span class="hljs-identifier">undefined</span>-<span class="hljs-identifier">correlation</span>-<span class="hljs-identifier">id</span>]</span> info message without correlation id
<span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">56.530</span> <span class="hljs-literal">[<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">1</span>-<span class="hljs-number">1920387277</span>]</span> INFO  zio.logging.Examples$ <span class="hljs-literal">[<span class="hljs-identifier">correlation</span>-<span class="hljs-identifier">id</span> = <span class="hljs-number">1234111</span>]</span> info message <span class="hljs-keyword">with</span> correlation id
<span class="hljs-number">00</span>:<span class="hljs-number">27</span>:<span class="hljs-number">56.546</span> <span class="hljs-literal">[<span class="hljs-identifier">zio</span>-<span class="hljs-identifier">default</span>-<span class="hljs-identifier">async</span>-<span class="hljs-number">4</span>-<span class="hljs-number">1920387277</span>]</span> ERROR zio.logging.Examples$ <span class="hljs-literal">[<span class="hljs-identifier">correlation</span>-<span class="hljs-identifier">id</span> = <span class="hljs-number">1234111</span>]</span> another info message <span class="hljs-keyword">with</span> correlation id
Fiber failed.
An unchecked error was produced.
java.lang.RuntimeException: error message
    at zio.logging.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Examples$</span>.</span></span><span class="hljs-constructor">$anonfun$run$6(Examples.<span class="hljs-params">scala</span>:26)</span>
    at zio.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZIO$ZipRightFn</span>.</span></span>apply(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZIO</span>.</span></span>scala:<span class="hljs-number">3368</span>)
    at zio.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZIO$ZipRightFn</span>.</span></span>apply(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZIO</span>.</span></span>scala:<span class="hljs-number">3365</span>)
    at zio.internal.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">FiberContext</span>.</span></span>evaluate<span class="hljs-constructor">Now(FiberContext.<span class="hljs-params">scala</span>:815)</span>
    at zio.internal.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">FiberContext</span>.</span></span><span class="hljs-constructor">$anonfun$fork$2(FiberContext.<span class="hljs-params">scala</span>:681)</span>
    at java.util.concurrent.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ThreadPoolExecutor</span>.</span></span>run<span class="hljs-constructor">Worker(ThreadPoolExecutor.<span class="hljs-params">java</span>:1142)</span>
    at java.util.concurrent.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ThreadPoolExecutor$Worker</span>.</span></span>run(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ThreadPoolExecutor</span>.</span></span>java:<span class="hljs-number">617</span>)
    at java.lang.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>run(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>java:<span class="hljs-number">745</span>)
No ZIO Trace available.
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="slf4j-and-mdc"></a><a href="#slf4j-and-mdc" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Slf4j and MDC</h3>
<p>We can create a logger and define a number of annotations that will be translated into an MDC context:</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Slf4jMdc</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">zio</span>.<span class="hljs-title">App</span> </span>{

  <span class="hljs-keyword">val</span> userId = <span class="hljs-type">LogAnnotation</span>[<span class="hljs-type">UUID</span>](
    name = <span class="hljs-string">"user-id"</span>,
    initialValue = <span class="hljs-type">UUID</span>.fromString(<span class="hljs-string">"0-0-0-0-0"</span>),
    combine = (_, newValue) =&gt; newValue,
    render = _.toString
  )

  <span class="hljs-keyword">val</span> logLayer = <span class="hljs-type">Slf4jLogger</span>.makeWithAnnotationsAsMdc(<span class="hljs-type">List</span>(userId))
  <span class="hljs-keyword">val</span> users = <span class="hljs-type">List</span>.fill(<span class="hljs-number">2</span>)(<span class="hljs-type">UUID</span>.randomUUID())

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(args: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">ZIO</span>[zio.<span class="hljs-type">ZEnv</span>, <span class="hljs-type">Nothing</span>, <span class="hljs-type">Int</span>] =
    (<span class="hljs-keyword">for</span> {
      correlationId &lt;- <span class="hljs-type">UIO</span>(<span class="hljs-type">Some</span>(<span class="hljs-type">UUID</span>.randomUUID()))
      _ &lt;- <span class="hljs-type">ZIO</span>.foreachPar(users) { uId =&gt;
        log.locally(_.annotate(userId, uId).annotate(<span class="hljs-type">LogAnnotation</span>.<span class="hljs-type">CorrelationId</span>, correlationId)) {
          log.info(<span class="hljs-string">"Starting operation"</span>) *&gt;
            <span class="hljs-type">ZIO</span>.sleep(<span class="hljs-number">500.</span>millis) *&gt;
            log.info(<span class="hljs-string">"Stopping operation"</span>)
        }
      }
    } <span class="hljs-keyword">yield</span> <span class="hljs-type">ExitCode</span>.success).provideCustomLayer(logLayer)
}
</code></pre>
<p>Expected console output (with logstash encoder):</p>
<pre><code class="hljs">{<span class="hljs-attr">"@timestamp"</span>:<span class="hljs-string">"2020-04-26T13:19:14.845+02:00"</span>,<span class="hljs-attr">"@version"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-attr">"message"</span>:<span class="hljs-string">"Starting operation"</span>,<span class="hljs-attr">"logger_name"</span>:<span class="hljs-string">"zio.logging.Slf4jMdc$"</span>,<span class="hljs-attr">"thread_name"</span>:<span class="hljs-string">"zio-default-async-7-1282747478"</span>,<span class="hljs-attr">"level"</span>:<span class="hljs-string">"INFO"</span>,<span class="hljs-attr">"level_value"</span>:<span class="hljs-number">20000</span>,<span class="hljs-attr">"user-id"</span>:<span class="hljs-string">"952fd569-b63c-4dac-ac9a-63dd2c60e50e"</span>}
{<span class="hljs-attr">"@timestamp"</span>:<span class="hljs-string">"2020-04-26T13:19:14.845+02:00"</span>,<span class="hljs-attr">"@version"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-attr">"message"</span>:<span class="hljs-string">"Starting operation"</span>,<span class="hljs-attr">"logger_name"</span>:<span class="hljs-string">"zio.logging.Slf4jMdc$"</span>,<span class="hljs-attr">"thread_name"</span>:<span class="hljs-string">"zio-default-async-8-1282747478"</span>,<span class="hljs-attr">"level"</span>:<span class="hljs-string">"INFO"</span>,<span class="hljs-attr">"level_value"</span>:<span class="hljs-number">20000</span>,<span class="hljs-attr">"user-id"</span>:<span class="hljs-string">"ec86bf22-41b4-4d09-a2b7-6d8ccadb1ca0"</span>}
{<span class="hljs-attr">"@timestamp"</span>:<span class="hljs-string">"2020-04-26T13:19:15.360+02:00"</span>,<span class="hljs-attr">"@version"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-attr">"message"</span>:<span class="hljs-string">"Stopping operation"</span>,<span class="hljs-attr">"logger_name"</span>:<span class="hljs-string">"zio.logging.Slf4jMdc$"</span>,<span class="hljs-attr">"thread_name"</span>:<span class="hljs-string">"zio-default-async-11-1282747478"</span>,<span class="hljs-attr">"level"</span>:<span class="hljs-string">"INFO"</span>,<span class="hljs-attr">"level_value"</span>:<span class="hljs-number">20000</span>,<span class="hljs-attr">"user-id"</span>:<span class="hljs-string">"952fd569-b63c-4dac-ac9a-63dd2c60e50e"</span>}
{<span class="hljs-attr">"@timestamp"</span>:<span class="hljs-string">"2020-04-26T13:19:15.360+02:00"</span>,<span class="hljs-attr">"@version"</span>:<span class="hljs-string">"1"</span>,<span class="hljs-attr">"message"</span>:<span class="hljs-string">"Stopping operation"</span>,<span class="hljs-attr">"logger_name"</span>:<span class="hljs-string">"zio.logging.Slf4jMdc$"</span>,<span class="hljs-attr">"thread_name"</span>:<span class="hljs-string">"zio-default-async-10-1282747478"</span>,<span class="hljs-attr">"level"</span>:<span class="hljs-string">"INFO"</span>,<span class="hljs-attr">"level_value"</span>:<span class="hljs-number">20000</span>,<span class="hljs-attr">"user-id"</span>:<span class="hljs-string">"ec86bf22-41b4-4d09-a2b7-6d8ccadb1ca0"</span>}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="scalajs-console"></a><a href="#scalajs-console" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scala.js Console</h3>
<p>The Scala.js console works as the JVM Console using the standard JS console for output.</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.logging._
<span class="hljs-keyword">import</span> zio.logging.js._
...

    <span class="hljs-type">Logging</span>.log(<span class="hljs-string">"test"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Trace</span>)(<span class="hljs-string">"test Trace"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Debug</span>)(<span class="hljs-string">"test Debug"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Info</span>)(<span class="hljs-string">"test Info"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Warn</span>)(<span class="hljs-string">"test Warn"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Error</span>)(<span class="hljs-string">"test Error"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Fatal</span>)(<span class="hljs-string">"test Fatal"</span>) *&gt;
      <span class="hljs-type">Logging</span>.log(<span class="hljs-type">LogLevel</span>.<span class="hljs-type">Off</span>)(<span class="hljs-string">"test Off"</span>)
</code></pre>
<p>Expected Console Output:</p>
<pre><code class="hljs"><span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z INFO  test
Trace: <span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z TRACE  test Trace
    at /Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">14731</span>:<span class="hljs-number">82</span>
    at $c_sjsr_AnonFunction0.apply__O (/Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">54402</span>:<span class="hljs-number">23</span>)
    at $c_Lzio_internal_FiberContext.evaluateNow__Lzio_ZIO__V (/Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">59390</span>:<span class="hljs-number">42</span>)
    at /Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">58797</span>:<span class="hljs-number">13</span>
    at $c_Lzio_internal_FiberContext$$Lambda$<span class="hljs-number">2.</span>run__V (/Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">34590</span>:<span class="hljs-number">16</span>)
    at $c_sjs_concurrent_QueueExecutionContext$PromisesExecutionContext.scala$scalajs$concurrent$QueueExecutionContext$PromisesExecutionContext$$$anonfun$execute$<span class="hljs-number">2</span>__sr_BoxedUnit__jl_Runnable__sjs_js_$bar (/Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">63008</span>:<span class="hljs-number">16</span>)
    at /Users/alberto/Projects/zio-logging/jsconsole/target/scala<span class="hljs-number">-2.12</span>/zio-logging-jsconsole-test-fastopt.js:<span class="hljs-number">63025</span>:<span class="hljs-number">24</span>
    at processTicksAndRejections (<span class="hljs-built_in">int</span>ernal/process/task_queues.js:<span class="hljs-number">97</span>:<span class="hljs-number">5</span>)
<span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z DEBUG  test Debug
<span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z INFO  test Info
<span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z WARN  test Warn
<span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z ERROR  test Error
<span class="hljs-number">1970</span><span class="hljs-number">-01</span><span class="hljs-number">-01</span>T00:<span class="hljs-number">00</span>Z FATAL  test Fatal
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="scalajs-http-ajax-pusher"></a><a href="#scalajs-http-ajax-pusher" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scala.js HTTP Ajax pusher</h3>
<p>This Scala.js implementation allows you to send logs to a remote server. It's very useful to control the navigation and action inside a SPA.</p>
<p>All events are sent to a backend via Ajax POST.</p>
<p>The JSON format of the event is the following:</p>
<pre><code class="hljs">{
     <span class="hljs-attr">"date"</span>: <span class="hljs-string">"2020-03-15T21:58:31.085+01:00"</span>,
     <span class="hljs-attr">"clientId"</span>: <span class="hljs-string">"446352f6-11be-4af9-99cb-2c0c1bab8721"</span>,
     <span class="hljs-attr">"level"</span>: <span class="hljs-string">"info"</span>,
     <span class="hljs-attr">"name"</span>: <span class="hljs-string">"index_page"</span>,
     <span class="hljs-attr">"msg"</span>: <span class="hljs-string">"index page loaded"</span>,
     <span class="hljs-attr">"cause"</span>: <span class="hljs-string">""</span>
}
</code></pre>
<p>The <strong>clientId</strong> is an identifier for the connection. The default is a randomly generated UUID.</p>
<p>To create a logger, the <strong>url</strong> for the POST is mandatory.</p>
<pre><code class="hljs css language-scala">

<span class="hljs-keyword">import</span> zio.logging._
<span class="hljs-keyword">import</span> zio.logging.js._
...

<span class="hljs-keyword">val</span> loggerLayer = <span class="hljs-type">HTTPLogger</span>.make(<span class="hljs-string">"http://localhost:9000/event/collect"</span>)((context, message) =&gt; message)


</code></pre>
<h3><a class="anchor" aria-hidden="true" id="slf4j-bridge"></a><a href="#slf4j-bridge" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SLF4j bridge</h3>
<p>It is possible to use <code>zio-logging</code> for SLF4j loggers, usually third-party non-ZIO libraries. To do so, import
the <code>zio-logging-slf4j-bridge</code> module:</p>
<pre><code class="hljs css language-scala">libraryDependencies += <span class="hljs-string">"dev.zio"</span> %% <span class="hljs-string">"zio-logging-slf4j-bridge"</span> % version
</code></pre>
<p>and use the <code>Slf4jBridge.initialize</code> layer when setting up logging:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> zio.logging.slf4j.<span class="hljs-type">Slf4jBridge</span>

program.provideCustom(<span class="hljs-type">Slf4jBridge</span>.initialize)
</code></pre>
<p><strong>NOTE</strong> You should either use <code>zio-logging-slf4j</code> to send all ZIO logs to an SLF4j provider (such as logback, log4j etc) OR <code>zio-logging-slf4j-bridge</code> to send all SLF4j logs to
ZIO logging. Enabling both causes circular logging and makes no sense.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#installation">Installation</a><ul class="toc-headings"><li><a href="#logger-context">Logger Context</a></li></ul></li><li><a href="#examples">Examples</a><ul class="toc-headings"><li><a href="#simple-console-log">Simple console log</a></li><li><a href="#logger-name-and-log-level">Logger Name and Log Level</a></li><li><a href="#slf4j-and-correlation-id">Slf4j and correlation id</a></li><li><a href="#slf4j-and-mdc">Slf4j and MDC</a></li><li><a href="#scalajs-console">Scala.js Console</a></li><li><a href="#scalajs-http-ajax-pusher">Scala.js HTTP Ajax pusher</a></li><li><a href="#slf4j-bridge">SLF4j bridge</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/zio-logging/" class="nav-home"><img src="/zio-logging/img/sidebar_brand2x.png" alt="ZIO logging"/></a><div><h5>GitHub</h5><a class="github-button" href="https://github.com/zio/zio-logging" data-icon="octicon-star" data-count-href="/zio/zio-logging/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div><div><h5>Chat with us on Discord</h5><a href="https://discord.gg/2ccFBr4"><img src="/zio-logging/img/discord.png" width="120" alt="discord"/></a></div><div><h5>Additional resources</h5><a href="https://zio.dev">ZIO Homepage</a><a href="/zio-logging/api">Scaladoc</a></div></section><section class="copyright">Copyright © 2022 ZIO Maintainers</section></footer></div></body></html>